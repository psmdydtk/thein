<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cooker.mapper">
<!-- 로그인 -->
	<select id="loginUser" parameterType="user" resultType="user">
	<![CDATA[
	SELECT *
	FROM bt_user
	WHERE user_id = #{user_id} AND user_pwd=#{user_pwd}
	]]>
	</select>
<!--메인화면에서 검색기능  -->
   <select id="search" resultType="shop">
   <![CDATA[
   SELECT *
   FROM bt_shop
   WHERE shop_location like CONCAT('%',#{loc},'%')
   ORDER BY shop_name DESC
   LIMIT #{start},7
   ]]>
   </select>

   
   
   <!--카운트리스트  -->
   <select id="countList" resultType="int">
   <![CDATA[
   select count(*) 
   from bt_shop
   where shop_location like '%'||#{loc}||'%'  
   ]]>
   </select>

<!-- 관리자-식당 수정(검색) -->
	<select id="shopSearch" resultType="shop">
	<![CDATA[
	SELECT *
	FROM bt_shop
	WHERE shop_id = #{shop_id}
	]]>
	</select>
	
	    <!--가게 상세보기  -->
   <select id="searchShop" resultType="shop">
   <![CDATA[
   SELECT * 
   FROM bt_shop 
   WHERE shop_id=#{shop}
   ]]>
   </select>
   
   <!--메인화면에서 검색기능  -->
   <select id="searchReserTime" resultType="reser">
   <![CDATA[
   SELECT *
   FROM bt_reservation
   WHERE reser_shop_id = #{reser_shop_id} and reser_shop_date = #{reser_shop_date}
   
   ]]>
   </select>
   
<!--메인화면에서 검색기능  -->
   <select id="searchKeyword" resultType="keyword">
   <![CDATA[
   SELECT *
	FROM bt_keyword
   ]]>
   </select>
   <!-- 관리자 - 가게 입력 -->
   <select id="insertShop" parameterType="shop">
   <![CDATA[
   INSERT INTO bt_shop 
   (shop_name,shop_street,shop_menu1,shop_menu1_price,shop_menu2,shop_menu2_price,shop_menu3,shop_menu3_price,shop_location,shop_description,shop_img,shop_point,shop_hash1,shop_hash2,shop_hash3) 
	VALUES
	(#{shop_name},#{shop_street},#{shop_menu1},#{shop_menu1_price},#{shop_menu2},#{shop_menu2_price},#{shop_menu3},#{shop_menu3_price},#{shop_location},#{shop_description},#{shop_img},#{shop_point},#{shop_hash1},#{shop_hash2},#{shop_hash3}) 
   ]]>
   </select>
   <!-- 사용자 정보 -->
	<select id="Userinfo" resultType="user">
	<![CDATA[
	SELECT *
	FROM bt_user
	WHERE user_id = #{user_id}
	]]>
	</select>
	<!--예약 하기  -->
   <select id="reservationInsert" resultType="int">
   <![CDATA[
   INSERT INTO 
   `thein`.`bt_reservation` (
    `reser_shop_id`,
    `reser_user_id`, 
    `reser_shop_date`, 
    `reser_shop_hour`, 
    `reser_shop_person`, 
    `reser_shop_price`, 
    `reser_shop_regi`,
    `reser_pass`) 
   VALUES (#{reser_shop_id}, #{reser_user_id}, #{reser_shop_date}, #{reser_shop_hour}, #{reser_shop_person}, #{reser_shop_price}, #{reser_shop_regi},0)
   ]]>
   </select>
	    <!--해시태그뽑기  -->
   <select id="selectHash" resultType="shop">
   <![CDATA[
   SELECT * 
   FROM bt_shop 
   ]]>
   </select>
</mapper>